{% extends 'base.html.twig' %}

{% block body %}

	<h4 class="text-center mt-5">Création d'un Article</h4>
	<div class="form_container">
		<form class="text-center mt-5 form" id="form_update" method="post" enctype="multipart/form-data">
			<div class="form-group">
				<label class="form-label" for="title">Titre</label>
				<br>
				<input type="text" name="title" id="title" required>
			</div>
			<div class="form-group w-25 mx-auto mt-3">
				<label class="form-label mt-3" for="content">Votre Contenu</label>
				<textarea class="form-control" name="content" id="content" rows="3" required></textarea>
			</div>
			<div class="form-group">
				<label class="form-label mt-3" for="image">Image</label>
				<br>
				<input type="file" name="image" id="image">
			</div>
			<div class="form-group">
				<label class="form-label mt-3" for="state">État</label>
				<br>
				<select name="state" id="state" required>
					<option value="1">Actif &#9989</option>
					<option value="0">Inactif &#x274C</option>
				</select>
			</div>
			<div class="form-group">
				<label class="form-label mt-3" for="category_id">Categories</label>
				<br>
				<select name="category_id" required>
					<option selected >Choisir</option>
					{% for category in allcategory %}
						<option value="{{ category.id }}">{{ category.name }}</option>
					{% endfor %}
				</select>
			</div>

			{# Afficher le message de succès #}
			{% if message %}
				<div class="success-message bg-success text-white mt-3 p-3">{{ message }}</div>
				<script>
					setTimeout(function () { // Redirection vers la page de détails d'un article
window.location.href = '/public/article';
}, 3000); // Temporisation de 3 secondes avant la redirection
				</script>
			{% endif %}
			<div>
				<button type="submit" class="btn btn-success mt-4">Créer</button>
			</div>

			<div class="mt-3">
				<a href="/public/article">
					<button type="button" class="btn btn-primary">Retour</button>
				</a>
			</div>
		</form>

	{% endblock %}
